<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>-_-</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: -apple-system, sans-serif; }
    body { background: #000; color: #fff; display: flex; justify-content: center; align-items: center; min-height: 100vh; padding: 20px; }
    .calculator { background: #000; padding: 20px; border-radius: 38px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); width: 320px; max-width: 100%; }
    .display { text-align: right; padding: 20px 10px; font-size: 64px; font-weight: 300; min-height: 80px; overflow: hidden; white-space: nowrap; color: #fff; }
    .buttons { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; }
    button { border: none; border-radius: 50%; width: 70px; height: 70px; font-size: 32px; cursor: pointer; transition: 0.1s; user-select: none; }
    button:active { transform: scale(0.95); }
    .gray { background: #a6a6a6; color: #000; }
    .gray:active { background: #8c8c8c; }
    .orange { background: #ff9500; color: #fff; }
    .orange:active { background: #cc7700; }
    .dark { background: #333; color: #fff; }
    .dark:active { background: #262626; }
    .zero { grid-column: span 2; border-radius: 35px; width: auto; }
    .secret-message { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); display: flex; flex-direction: column; justify-content: center; align-items: center; font-size: 32px; font-weight: bold; color: #0f0; z-index: 999; opacity: 0; pointer-events: none; transition: opacity 0.5s; }
    .secret-message.show { opacity: 1; pointer-events: all; }
  </style>
</head>
<body>

  <div class="calculator">
    <div class="display" id="display">0</div>
    <div class="buttons">
      <button class="gray" onclick="clearAll()">C</button>
      <button class="gray" onclick="toggleSign()">+/-</button>
      <button class="gray" onclick="percent()">%</button>
      <button class="orange" onclick="inputOperator('÷')">÷</button>

      <button class="dark" onclick="inputNumber('7')">7</button>
      <button class="dark" onclick="inputNumber('8')">8</button>
      <button class="dark" onclick="inputNumber('9')">9</button>
      <button class="orange" onclick="inputOperator('×')">×</button>

      <button class="dark" onclick="inputNumber('4')">4</button>
      <button class="dark" onclick="inputNumber('5')">5</button>
      <button class="dark" onclick="inputNumber('6')">6</button>
      <button class="orange" onclick="inputOperator('-')">-</button>

      <button class="dark" onclick="inputNumber('1')">1</button>
      <button class="dark" onclick="inputNumber('2')">2</button>
      <button class="dark" onclick="inputNumber('3')">3</button>
      <button class="orange" onclick="inputOperator('+')">+</button>

      <button class="dark zero" onclick="inputNumber('0')">0</button>
      <button class="dark" onclick="inputNumber('.')">.</button>
      <button class="orange" onclick="calculate()">=</button>
    </div>
  </div>

  <div class="secret-message" id="secretMessage">
    <div id="secretText"></div>
  </div>

  <script>
    // === KALKULATOR ===
    let display = document.getElementById('display');
    let currentInput = '0';
    let previousInput = null;
    let operator = null;
    let shouldResetDisplay = false;

    let secretBuffer = '';
    let unlocked = false;
    const secretCode1 = '123456789';
    const secretCode2 = '123';

    function updateDisplay() {
      let value = currentInput;
      if (value === '' || value === '0') value = '0';
      if (value.includes('.')) {
        value = parseFloat(value).toLocaleString('en-US', { maximumFractionDigits: 8 });
      } else {
        value = parseFloat(value).toLocaleString('en-US');
      }
      display.textContent = value;
    }

    function inputNumber(num) {
      checkSecret(num);
      if (shouldResetDisplay) { currentInput = ''; shouldResetDisplay = false; }
      if (num === '.') {
        if (currentInput.includes('.')) return;
        if (currentInput === '') currentInput = '0';
      }
      if (currentInput === '0' && num !== '.') currentInput = num;
      else currentInput += num;
      updateDisplay();
    }

    function inputOperator(op) {
      checkSecret(op);
      const inputValue = parseFloat(currentInput);
      if (previousInput === null) previousInput = inputValue;
      else if (operator) {
        const result = doCalculation();
        if (result === null) return;
        previousInput = result;
      } else {
        previousInput = inputValue;
      }
      operator = op;
      shouldResetDisplay = true;
    }

    function calculate() {
      if (!operator || previousInput === null) return;
      const result = doCalculation();
      if (result === null) return;
      currentInput = result.toString();
      previousInput = null;
      operator = null;
      shouldResetDisplay = true;
      updateDisplay();
    }

    function doCalculation() {
      const prev = previousInput;
      const current = parseFloat(currentInput);
      if (isNaN(current)) return null;
      let result;
      switch (operator) {
        case '+': result = prev + current; break;
        case '-': result = prev - current; break;
        case '×': result = prev * current; break;
        case '÷':
          if (current === 0) { alert("Tidak bisa dibagi nol!"); clearAll(); return null; }
          result = prev / current; break;
      }
      return result;
    }

    function clearAll() { currentInput = '0'; previousInput = null; operator = null; shouldResetDisplay = false; updateDisplay(); }
    function toggleSign() { if (currentInput !== '0') currentInput = currentInput.startsWith('-') ? currentInput.slice(1) : '-' + currentInput; updateDisplay(); }
    function percent() { const value = parseFloat(currentInput); if (!isNaN(value)) currentInput = (value / 100).toString(); updateDisplay(); }

    // === SISTEM RAHASIA ===
    function checkSecret(input) {
      secretBuffer += input;
      if (secretBuffer.length > 20) secretBuffer = secretBuffer.slice(-9);

      if (!unlocked && secretBuffer.includes(secretCode1)) {
        unlocked = true;
        showSecretMessage('UNLOCKED');
        secretBuffer = '';
        setTimeout(hideSecretMessage, 1500);
      }

      if (unlocked && secretBuffer.includes(secretCode2)) {
        secretBuffer = '';
        showSecretMessage('ACCESS GRANTED FOR USERS');
        const now = Date.now();
        localStorage.setItem('secretAccess', now.toString());
        localStorage.setItem('secretTime', now.toString());
        setTimeout(() => {
          window.location.href = 'secret.html';
        }, 1500);
      }
    }

    function showSecretMessage(text) {
      document.getElementById('secretText').textContent = text;
      document.getElementById('secretMessage').classList.add('show');
    }

    function hideSecretMessage() {
      document.getElementById('secretMessage').classList.remove('show');
    }

    updateDisplay();
  </script>
</body>
</html>